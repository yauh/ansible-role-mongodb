---
# user related tasks for yauh.mongodb
- name: Create users script
  template: src=users.js.j2 dest=/tmp/users.js

- name: Add users
  shell: mongo < /tmp/users.js
  ignore_errors: yes

- name: Remove users script
  file: dest=/tmp/users.js state=absent

- name: Secure Mongodb configuration
  lineinfile: dest=/etc/mongod.conf regexp="^#?auth" line="auth = true" state=present
  notify: restart mongod
